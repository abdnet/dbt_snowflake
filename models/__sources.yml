version: 2

sources:
  - name: ecommerce
    database: RAW
    schema: WH01
    tables:
      - name: src_customers
        description: One record per customer. Includes information about customers.
        columns:
          - name: id
            description: Primary key of the customers table
            tests:
              - unique
              - not_null
          - name: name
            description: Name of the customer
            tests:
              - not_null
      - name: src_items
        description: One record per item in an order. Includes details about items.
        columns:
          - name: id
            description: Primary key of the items table
            tests:
              - unique
              - not_null
          - name: order_id
            description: Foreign key referencing the order to which the item belongs
            tests:
              - not_null
              - relationships:
                  to: ref('src_orders')
                  field: id
          - name: sku
            description: Stock Keeping Unit (SKU) of the item
            tests:
              - not_null
              - relationships:
                  to: ref('src_products')
                  field: sku

      - name: src_orders
        description: One record per order. Includes cancelled and deleted orders.
        columns:
          - name: id
            description: Primary key of the orders table
            tests:
              - unique
              - not_null
          - name: customer
            description: Foreign key referencing the customer who placed the order
            tests:
              - not_null
              - relationships:
                  to: ref('src_customers')
                  field: id
          - name: ordered_at
            description: Timestamp when the order was placed
            tests:
              - not_null
          - name: store_id
            description: Foreign key referencing the store where the order was placed
            tests:
              - not_null
              - relationships:
                  to: ref('src_stores')
                  field: id
          - name: subtotal
            description: Subtotal amount of the order
            tests:
              - not_null
          - name: tax_paid
            description: Tax amount paid for the order
            tests:
              - not_null
          - name: order_total
            description: Total amount of the order including tax
            tests:
              - not_null


      - name: src_products
        description: One record per product. Includes details about products.
        columns:
          - name: sku
            description: Stock Keeping Unit (SKU) of the product
            tests:
              - unique
              - not_null
          - name: name
            description: Name of the product
            tests:
              - not_null
          - name: type
            description: Type of the product
            tests:
              - not_null
          - name: price
            description: Price of the product
            tests:
              - not_null
          - name: description
            description: Description of the product

      - name: src_stores
        description: One record per store. Includes information about stores.
        columns:
          - name: id
            description: Primary key of the stores table
            tests:
              - unique
              - not_null
          - name: name
            description: Name of the store
            tests:
              - not_null
          - name: opened_at
            description: Timestamp when the store was opened
            tests:
              - not_null
          - name: tax_rate
            description: Tax rate for the store
            tests:
              - not_null

      - name: src_supplies
        description: One record per supply. Includes information about supplies.
        columns:
          - name: id
            description: Primary key of the supplies table
            tests:
              - not_null
          - name: name
            description: Name of the supply
            tests:
              - not_null
          - name: cost
            description: Cost of the supply
            tests:
              - not_null
          - name: perishable
            description: Indicates whether the supply is perishable
            tests:
              - not_null
          - name: sku
            description: Stock Keeping Unit (SKU) of the supply
            tests:
              - not_null
